<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Preview Image</title>

	<style>
		.preview-image {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			background-color: #43444627;
			padding: 3rem;
			margin: 0;
			height: 100%;
		}

		.input{
			outline: none;
			border: white;
			margin-left: 6px;
			margin-right: 6px;
			border-radius: 9px;
			padding: 6px;
		}

		.input-container{
			display: flex;
			flex-direction: row;
		}

		.preview-btn {
			padding: 12px;
			color: white;
			background-color: rgb(81, 81, 238);
			border-radius: 6px;
			outline: none;
			border: none;
		}

		.preview-btn:hover{
			cursor: pointer;
		}

		.image-container {
			display: none;
			margin: 2rem;
		}

		.img-btn {
			padding: 9px;
			color: white;
			background-color: blue;
			border-radius: 6px;
			outline: none;
			border: none;
			margin-top: 1rem;
		}

		.img-btn:hover{
			cursor: pointer;
		}
	</style>
</head>
<body>
	<section class="preview-image">
		<div class="input-container">
			<input type="text" class="input" id="input-link"/>
			<button class="preview-btn" id="preview-button">Preview Image</button>
		</div>
		<div class="image-container" id="img-container">
			<img id="img"/> 
			<button class="img-btn" onclick="downloadImage('img')">Download Image</button>
		</div>

	</section>

	<script>
		
		document.addEventListener("DOMContentLoaded", () => {
			const preview_button = document.getElementById("preview-button")
			preview_button.addEventListener("click", () => {
			const input_link = document.getElementById("input-link").value;
			//set the image display to flex
			const image_container = document.getElementById("img-container");
			const img = document.getElementById("img");
			img.src = input_link;
			img.width = 100;
			img.height = 100;
			image_container.style.display = "flex";
			image_container.style.flexDirection = "column";
			image_container.style.justifyContent = "center";
			image_container.style.alignSelf = "center";
		})

		
		window.downloadImage = async (img) => {
			//get image using id provided
			const image = document.getElementById(img);
			const link = document.createElement("a");
			const download_img = await fetch(image.src);
			const image_blob = await download_img.blob();
			link.href = URL.createObjectURL(image_blob);
			link.download = "preview-image";
            link.click(); // Simulate click
			URL.revokeObjectURL(image_blob);
		}
		
	});
		
	</script>
</body>
</html>